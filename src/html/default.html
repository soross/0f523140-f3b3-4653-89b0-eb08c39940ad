<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
    <title>首页 - 微招聘</title>
    <link href="css/themes/base/jquery.ui.all.css" rel="Stylesheet" type="text/css" />
    <link href="css/share.css" rel="stylesheet" type="text/css" />
    <link href="css/default.css" rel="stylesheet" type="text/css" />
    <script src="script/jquery-1.5.1.js" type="text/javascript"></script>
    <script src="script/jquery.cookie.js" type="text/javascript"></script>
    <script src="script/ui/jquery.ui.position.js" type="text/javascript"></script>
    <script src="script/share.js" type="text/javascript"></script>
    <script src="script/default.js" type="text/javascript"></script>
    <script type="text/javascript">
        function DocumenScroll() {
            if ($(window).scrollTop() != 0) {
                $("div#backTop").fadeIn(200)
            }
            else {
                $("div#backTop").fadeOut(200);
            }
            if (($(window).scrollTop() + $(window).height()) >= $(document).height() - 200 && count < 4) {
                $(document).unbind("scroll");
                count++;
                $.ajax({
                    type: 'GET',
                    url: 'search/' + encodeURI(SearchResult) + '/' + cate + '/-' + $(".microblog-item:last").attr("id"),
                    success: function (msg) {
                        $("div#blogs").html($("div#blogs").html() + msg);
                        $("a.microblog-item-relate").unbind("click");
                        $("a.microblog-item-relate").click(function () {
                            var text = $(this).html();
                            $.ajax({
                                type: 'GET',
                                url: 'search/' + encodeURI(text),
                                success: function (msg) {
                                    page = 0;
                                    cate = 0;
                                    SetSearch(msg, text);
                                    nowFirst = $(".microblog-item:first").attr("id");
                                }
                            });
                        });
                        $("a.like").unbind("click");
                        $("a.unlike").unbind("click");
                        $("a.like").click(function () {
                            var item = $(this);
                            var id = $(this).parent().parent().parent().attr("name");
                            $.ajax({
                                type: "POST",
                                url: 'like/add/' + id,
                                success: function () {
                                    item.hide();
                                    item.next("a.unlike").show();
                                }
                            });
                        });
                        $("a.unlike").click(function () {
                            var item = $(this);
                            var id = $(this).parent().parent().parent().attr("name");
                            $.ajax({
                                type: "POST",
                                url: 'like/delete/' + id,
                                success: function () {
                                    item.hide();
                                    item.prev("a.like").show();
                                }
                            });
                        });
                        $(document).scroll(function () {
                            DocumenScroll();
                        });
                    }
                });
            }
        }

        function GetNewerBlogs() {
            $.ajax({
                type: 'GET',
                url: 'search/' + encodeURI(SearchResult) + '/' + cate + '/' + nowFirst,
                success: function (msg) {
                    if (msg != "") {
                        $.ajax({
                            type: 'POST',
                            url: 'count/',
                            success: function (msg) {
                                if (!issearch) {
                                    $("div#radio").html("本周新增职位" + msg.split(',')[0] + "个，今日新增职位" + msg.split(',')[1] + "个");
                                }
                            }
                        });
                        if (!isFreshed) {
                            $("div#blogs").html($("div#fresh-blogs").html() + $("div#blogs").html());
                            $("div#fresh-blogs").hide();
                            isFreshed = true;
                            $("a.microblog-item-relate").unbind("click");
                            $("a.microblog-item-relate").click(function () {
                                var text = $(this).html();
                                $.ajax({
                                    type: 'GET',
                                    url: 'search/' + encodeURI(text),
                                    success: function (msg) {
                                        page = 0;
                                        cate = 0;
                                        SetSearch(msg, text);
                                        nowFirst = $(".microblog-item:first").attr("id");
                                    }
                                });
                            });
                            $("a.like").unbind("click");
                            $("a.unlike").unbind("click");
                            $("a.like").click(function () {
                                var item = $(this);
                                var id = $(this).parent().parent().parent().attr("name");
                                $.ajax({
                                    type: "POST",
                                    url: 'like/add/' + id,
                                    success: function () {
                                        item.hide();
                                        item.next("a.unlike").show();
                                    }
                                });
                            });
                            $("a.unlike").click(function () {
                                var item = $(this);
                                var id = $(this).parent().parent().parent().attr("name");
                                $.ajax({
                                    type: "POST",
                                    url: 'like/delete/' + id,
                                    success: function () {
                                        item.hide();
                                        item.prev("a.like").show();
                                    }
                                });
                            });
                        }
                        $("div#fresh-blogs").html(msg);
                        $("div#fresh").html('有' + (msg.split("id=").length - 1) + '条更新，点击<a class="keyword">这里</a>刷新');
                        $("div#fresh-outer").slideDown(300, null, function () {
                            $("div#fresh-outer").animate({ opacity: 1 }, 200);
                        });
                        $("div#fresh a").click(function () {
                            isFreshed = false;
                            $("div#fresh-blogs").slideDown(500, null, function () {
                                $("div#fresh-blogs").animate({ opacity: 1 }, 200);
                            });
                            nowFirst = $(".microblog-item:first").attr("id");
                            $("div#fresh-outer").animate({ opacity: 0 }, 0, null, function () {
                                $("div#fresh-outer").slideUp(300);
                            });
                            $("a.microblog-item-relate").unbind("click");
                            $("a.microblog-item-relate").click(function () {
                                var text = $(this).html();
                                $.ajax({
                                    type: 'GET',
                                    url: 'search/' + encodeURI(text),
                                    success: function (msg) {
                                        page = 0;
                                        cate = 0;
                                        SetSearch(msg, text);
                                        nowFirst = $(".microblog-item:first").attr("id");
                                    }
                                });
                            });
                            $("a.like").unbind("click");
                            $("a.unlike").unbind("click");
                            $("a.like").click(function () {
                                var item = $(this);
                                var id = $(this).parent().parent().parent().attr("name");
                                $.ajax({
                                    type: "POST",
                                    url: 'like/add/' + id,
                                    success: function () {
                                        item.hide();
                                        item.next("a.unlike").show();
                                    }
                                });
                            });
                            $("a.unlike").click(function () {
                                var item = $(this);
                                var id = $(this).parent().parent().parent().attr("name");
                                $.ajax({
                                    type: "POST",
                                    url: 'like/delete/' + id,
                                    success: function () {
                                        item.hide();
                                        item.prev("a.like").show();
                                    }
                                });
                            });
                        });
                    }
                }
            });
            setTimeout(function () { GetNewerBlogs(); }, 60000);
        }

        $(function () {
            $.ajax({
                type: 'POST',
                url: 'hot/',
                success: function (msg) {
                    $("div#hot").html(msg);
                    $("a.hot-content-item").click(function () {
                        var text = $(this).html().split('(')[0];
                        $.ajax({
                            type: 'GET',
                            url: 'search/' + encodeURI(text),
                            success: function (msg) {
                                page = 0;
                                cate = 0;
                                SetSearch(msg, text);
                                nowFirst = $(".microblog-item:first").attr("id");
                            }
                        });
                    });
                }
            });
            $("div#backTop").position({
                of: $("div#microblogs"),
                my: "left top",
                at: "right top",
                offset: "0 " + ($(window).scrollTop() + $(window).height() - $("div#microblogs").offset().top - 80),
                collision: "none none"
            });
            $("div#backTop").css("position", "fixed");
            $("div#backTop a").click(function () {
                $(window).scrollTop(0);
            });

            $("div#jobs-publish-confirm a").click(function () {
                $.ajax({
                    type: 'POST',
                    url: 'post/1',
                    data: { text: $("div#jobs-publish-text textarea").val() },
                    success: function (msg) {
                        if ($.trim(msg) != "0") {
                            alert(msg);
                        }
                        HideJobsPublish();
                    }
                });
            });
            $("div#recruitment-publish-confirm a").click(function () {
                $.ajax({
                    type: 'POST',
                    url: 'post/2',
                    data: { text: $("div#recruitment-publish-text textarea").val() },
                    success: function (msg) {
                        if ($.trim(msg) != "0") {
                            alert(msg);
                        }
                        HideRecruitmentPublish();
                    }
                });
            });

            $(document).scroll(function () {
                DocumenScroll();
            });

            $("#search-text").keypress(function (e) {
                if (e.which == 13) {
                    if ($("#search-text").val() != "职位关键字，如：北京 产品经理 阿里巴巴") {
                        $.ajax({
                            type: 'GET',
                            url: 'search/' + encodeURI($.trim($("#search-text").val())) + '/' + cate,
                            success: function (msg) {
                                SetSearch(msg, $("#search-text").val());
                                nowFirst = $(".microblog-item:first").attr("id");
                            }
                        });
                    }
                }
            });
            $("a#search-button").click(function () {
                if ($("#search-text").val() != "职位关键字，如：北京 产品经理 阿里巴巴") {
                    $.ajax({
                        type: 'GET',
                        url: 'search/' + encodeURI($.trim($("#search-text").val())) + '/' + cate,
                        success: function (msg) {
                            SetSearch(msg, $("#search-text").val());
                            nowFirst = $(".microblog-item:first").attr("id");
                        }
                    });
                }
            });
        });

        function AfterLogin() {
            $.ajax({
                type: 'POST',
                url: 'info/',
                success: function (msg) {
                    $(".logined").fadeIn(300);
                    $("a#name").html(msg.split(',')[0]);
                    var type = msg.split(',')[1];
                    if (type == 0) {
                        $("div#cover").fadeIn(200);
                        $("div#role-choose").fadeIn(200);
                    }
                    else if (type == 1) {
                        $(".jobs").fadeIn(300);
                        $(".recruitment").hide();
                    }
                    else {
                        $(".recruitment").fadeIn(300);
                        $(".jobs").hide();
                    }
                    $("#concern").html('<img src="images/loading.gif" style="margin-left:134px;" />');
                    $.ajax({
                        type: 'POST',
                        url: 'follow/show/5',
                        success: function (msg) {
                            $("#concern").animate({ opacity: 0 }, 200, null, function () {
                                $("#concern").slideUp(100, null, function () {
                                    $("#concern").html(msg);
                                    SetConcern();
                                    $("#concern").slideDown(100, null, function () {
                                        $("#concern").animate({ opacity: 1 }, 200);
                                    });
                                });
                            });
                        }
                    });
                    $.ajax({
                        type: 'GET',
                        url: 'history/show/5',
                        success: function (msg) {
                            $("#history").html(msg);
                            SetHistory();
                        }
                    });
                }
            });
        }
    </script>
</head>
<body>
    <div id="header">
        <div class="left" id="links">
            <a class="left">微博招聘网</a> <a class="left">微博招聘官方微博</a> <a class="left last">我的微博</a>
        </div>
        <div class="right" id="infos">
            <a class="left selected logined" id="name"></a><a class="left orange logined" href="manager.html">
                信息管理</a> <a class="left logined jobs" id="jobs-publish-quick">发布求职信息</a><a class="left logined recruitment"
                    id="recruitment-publish-quick">发布招聘信息</a> <a class="left logined" href="logout/">退出</a>
            <a class="left logouted" id="sina-login" href="login/"></a>
        </div>
    </div>
    <div id="logo-search">
        <a id="logo" class="left" href="default.html"></a>
        <div id="search-bar" class="left">
            <a class="left sort" id="sort">全部分类</a><a class="left sort" id="sort-triangle">&#9660;</a>
            <input class="left" id="search-text" type="text" value="职位关键字，如：北京 产品经理 阿里巴巴" />
            <a class="left" id="search-button"></a>
        </div>
    </div>
    <div id="company" class="inner">
        <div class="clear">
        </div>
        <span class="left company-name">热门企业：</span>
        <div class="left" id="companies">
            <div id="companies-inner">
                <a class="company-name">百度</a><a class="company-name">阿里巴巴</a><a class="company-name">
                    百度</a><a class="company-name">阿里巴巴</a><a class="company-name">百度</a><a class="company-name">
                        阿里巴巴</a><a class="company-name">百度</a><a class="company-name">阿里巴巴</a><a class="company-name">
                            百度</a><a class="company-name">微软亚洲研究院</a><a class="company-name">微软亚洲研究院</a>
                <a class="company-name">微软亚洲研究院</a><a class="company-name">微软亚洲研究院</a><a class="company-name">微软亚洲研究院</a><a
                    class="company-name last">百度</a></div>
        </div>
        <div class="left" id="company-control">
            <a class="left company-control" id="company-control-left">◀</a> <a class="left company-control"
                id="company-control-right">▶</a>
        </div>
    </div>
    <div id="content" class="inner">
        <div id="left" class="left">
            <div id="concern" class="logined">
            </div>
            <div id="history" class="logined">
            </div>
            <div id="hot">
            </div>
        </div>
        <div id="right" class="left">
            <div id="radio">
            </div>
            <div id="microblogs">
                <div id="fresh-outer">
                    <div id="fresh">
                        有条更新，点击<a class="keyword">这里</a>刷新
                    </div>
                </div>
                <div id="search-result-outer">
                    <div id="search-result">
                        <div class="left">
                        </div>
                        <a id="search-result-concern" class="left search-result-concern"></a><a id="search-result-rss"
                            class="right"></a>
                    </div>
                </div>
                <div id="fresh-blogs" style="display: none; border-bottom: 1px #4e88af solid">
                </div>
                <div id="blogs">
                </div>
                <div id="pages">
                </div>
            </div>
        </div>
    </div>
    <div class="clear">
    </div>
    <div id="footer" class="inner">
        <div id="footerlinks">
            <a href="help.html">网站帮助</a> | <a href="feedback.html">意见反馈</a> | <a>联系我们</a></div>
        <div id="copyright">
            CopyRight © 2011-2012 <a>微博招聘网</a> Co. All Right Reserved. 鄂ICP证100111号<br />
            Powered by:GNG</div>
    </div>
    <div id="sorts" class="absolute">
        <div id="sorts-tag" style="visibility: hidden;">
            <a id="sorts-name" class="left">全部分类</a> <a id="sorts-triangle" class="left">&#9660;</a>
        </div>
        <div id="sorts-content">
        </div>
    </div>
    <div id="cover">
    </div>
    <div id="role-choose" class="absolute role-jobs">
        <a id="role-jobs" class="absolute"></a><a id="role-recruitment" class="absolute">
        </a><a id="role-confirm" class="absolute"></a>
    </div>
    <div id="jobs-publish" class="absolute">
        <div id="jobs-publish-title">
            <span class="left">发布求职信息</span> <a class="right"></a>
        </div>
        <div id="jobs-publish-content">
            <div id="jobs-publish-remain">
                还可输入136个字</div>
            <div id="jobs-publish-text">
                <textarea>#求职#</textarea>
            </div>
            <!--<div id="jobs-publish-tags">
                <span id="jobs-publish-tags-title" class="left">职位标签</span>
                <input type="text" class="left" />
                <span id="jobs-publish-tags-ps" class="left">标签之间用空格隔开</span>
            </div>-->
            <div id="jobs-publish-tags-hot">
            </div>
            <div id="jobs-publish-confirm">
                <a class="right"></a>
            </div>
        </div>
    </div>
    <div id="recruitment-publish" class="absolute">
        <div id="recruitment-publish-title">
            <span class="left">发布招聘信息</span> <a class="right"></a>
        </div>
        <div id="recruitment-publish-content">
            <div id="recruitment-publish-remain">
                还可输入136个字</div>
            <div id="recruitment-publish-text">
                <textarea>#招聘#</textarea>
            </div>
            <div id="recruitment-publish-tags">
                <span id="recruitment-publish-tags-title" class="left">职位标签</span>
                <input type="text" class="left" />
                <span id="recruitment-publish-tags-ps" class="left">标签之间用空格隔开</span>
            </div>
            <div id="recruitment-publish-tags-hot">
                <span id="recruitment-publish-tags-hot-title" class="left">热门标签</span> <a class="left
    recruitment-publish-tags-hot-item" title="产品经理">产品经理</a> <a class="left recruitment-publish-tags-hot-item"
        title=".NET开发工程师">.NET开发工程师</a> <a class="left recruitment-publish-tags-hot-item"
            title="UI设计师">UI设计师</a>
            </div>
            <div id="recruitment-publish-confirm">
                <a class="right"></a>
            </div>
        </div>
    </div>
    <div id="backTop" class="absolute">
        <a>回到顶部</a>
    </div>
</body>
</html>
